(()=>{function a(e){var t=e.querySelector('input[type="hidden"]'),l=e.getAttribute("data-tui-selectbox-content-id"),l=document.getElementById(l);if(t&&l){e="true"===e.getAttribute("data-tui-selectbox-multiple");let c=t.value?e?t.value.split(","):[t.value]:[];l.querySelectorAll(".select-item").forEach(e=>{var t=e.getAttribute("data-tui-selectbox-value")||"",t=c.includes(t);t!==("true"===e.getAttribute("data-tui-selectbox-selected"))&&(e.setAttribute("data-tui-selectbox-selected",t.toString()),t?(e.classList.add("bg-accent","text-accent-foreground"),(t=e.querySelector(".select-check"))&&t.classList.replace("opacity-0","opacity-100")):(e.classList.remove("bg-accent","text-accent-foreground"),(t=e.querySelector(".select-check"))&&t.classList.replace("opacity-100","opacity-0")))})}}function o(a){let r=a.querySelector(".select-value");var e=a.querySelector('input[type="hidden"]'),t=a.getAttribute("data-tui-selectbox-content-id"),t=document.getElementById(t);if(!t&&e&&e.value)r.textContent=e.value,r.classList.remove("text-muted-foreground");else if(r&&t){var l="true"===a.getAttribute("data-tui-selectbox-multiple"),o="true"===a.getAttribute("data-tui-selectbox-show-pills"),i=r.getAttribute("data-tui-selectbox-placeholder")||"Select...";let c=t.querySelectorAll('.select-item[data-tui-selectbox-selected="true"]');if(0===c.length)r.textContent=i,r.classList.add("text-muted-foreground"),e&&(e.value="");else if(r.classList.remove("text-muted-foreground"),l){if(o){r.innerHTML="";let t=document.createElement("div"),l=(t.className="flex flex-wrap gap-1 items-center min-h-[1.5rem]",[]);Array.from(c).forEach(e=>{var t=document.createElement("span"),c=(t.className="inline-flex items-center gap-1 px-2 py-0.5 text-xs rounded-md bg-primary text-primary-foreground",document.createElement("span")),c=(c.textContent=e.querySelector(".select-item-text")?.textContent||"",t.appendChild(c),document.createElement("button"));c.className="ml-0.5 hover:text-destructive focus:outline-none",c.type="button",c.innerHTML="Ã—",c.setAttribute("data-tui-selectbox-pill-remove",""),c.setAttribute("data-tui-selectbox-value",e.getAttribute("data-tui-selectbox-value")),t.appendChild(c),l.push(t)}),l.forEach(e=>t.appendChild(e)),r.appendChild(t),requestAnimationFrame(()=>{var e;r.offsetWidth-10<t.scrollWidth&&3<c.length&&(e=a.getAttribute("data-tui-selectbox-selected-count-text")||"{n} items selected",r.textContent=e.replace("{n}",c.length))})}else{t=a.getAttribute("data-tui-selectbox-selected-count-text")||"{n} items selected";r.textContent=t.replace("{n}",c.length)}i=Array.from(c).map(e=>e.getAttribute("data-tui-selectbox-value")||"");e&&(e.value=i.join(","))}else{l=c[0],o=l.querySelector(".select-item-text")?.textContent||"";r.textContent=o,e&&(e.value=l.getAttribute("data-tui-selectbox-value")||"")}}}function c(e){let l=e.value.toLowerCase().trim();e=e.closest("[data-tui-popover-id]");e&&e.querySelectorAll(".select-item").forEach(e=>{var t=e.querySelector(".select-item-text")?.textContent.toLowerCase()||"",c=e.getAttribute("data-tui-selectbox-value")?.toLowerCase()||"",t=!l||t.includes(l)||c.includes(l);e.style.display=t?"":"none"})}function r(t){if("true"!==t.getAttribute("data-tui-selectbox-disabled")){var c,l,a=t.closest("[data-tui-popover-id]"),r=a?.id;let e=document.querySelector(`[data-tui-selectbox-content-id="${r}"]`);e&&(c="true"===e.getAttribute("data-tui-selectbox-multiple"),l="true"===t.getAttribute("data-tui-selectbox-selected"),c||a.querySelectorAll(".select-item").forEach(e=>{e.setAttribute("data-tui-selectbox-selected","false"),e.classList.remove("bg-accent","text-accent-foreground");e=e.querySelector(".select-check");e&&e.classList.replace("opacity-100","opacity-0")}),t.setAttribute("data-tui-selectbox-selected",(!l).toString()),l?(t.classList.remove("bg-accent","text-accent-foreground"),(a=t.querySelector(".select-check"))&&a.classList.replace("opacity-100","opacity-0")):(t.classList.add("bg-accent","text-accent-foreground"),(l=t.querySelector(".select-check"))&&l.classList.replace("opacity-0","opacity-100")),o(e),(a=e.querySelector('input[type="hidden"]'))&&a.dispatchEvent(new Event("change",{bubbles:!0})),!c)&&window.closePopover&&(window.closePopover(r),setTimeout(()=>e.focus(),50))}}function e(){document.querySelectorAll(".select-container").forEach(e=>{e=e.querySelector("button.select-trigger");if(e&&!e.hasAttribute("data-initialized")){e.setAttribute("data-initialized","true");var t=e.querySelector('input[type="hidden"]');if(t)if(!t.hasAttribute("data-tui-reactive-bound")){t.setAttribute("data-tui-reactive-bound","true");var l=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");if(l&&l.set){let c=l.set;Object.defineProperty(t,"value",{get:l.get,set:function(e){var t=this.value;c.call(this,e),t!==e&&(t=this.closest(".select-trigger"))&&(a(t),o(t))},configurable:!0})}}o(e)}})}document.addEventListener("click",l=>{if(l.target.matches("[data-tui-selectbox-pill-remove]")){l.stopPropagation();var c=l.target.getAttribute("data-tui-selectbox-value");let e=l.target.closest("button.select-trigger");var a=e?.getAttribute("data-tui-selectbox-content-id");let t=document.getElementById(a)?.querySelector(`.select-item[data-tui-selectbox-value="${c}"]`);void(t&&r(t))}else{let e=l.target.closest(".select-item");if(e)l.preventDefault(),r(e);else{let c=l.target.closest("button.select-trigger");if(c){a=c.getAttribute("data-tui-selectbox-content-id");let e=document.getElementById(a),t=e?.querySelector("[data-tui-selectbox-search]");t&&setTimeout(()=>{"none"!==e.style.display&&t.focus()},50)}}}}),document.addEventListener("input",e=>{e.target.matches("[data-tui-selectbox-search]")?c(e.target):e.target.matches('.select-trigger input[type="hidden"]')&&(e=e.target.closest(".select-trigger"))&&(a(e),o(e))}),document.addEventListener("keydown",c=>{var e=document.activeElement;if(e?.matches("button.select-trigger")&&(1===c.key.length||"Backspace"===c.key)){c.preventDefault();let t=e.getAttribute("data-tui-selectbox-content-id");e.click(),setTimeout(()=>{var e=document.getElementById(t)?.querySelector("[data-tui-selectbox-search]");e&&(e.focus(),"Backspace"!==c.key)&&(e.value=c.key)},50)}var t=e?.closest("[data-tui-popover-id]");if(t?.querySelector(".select-item"))if("ArrowDown"===c.key||"ArrowUp"===c.key){c.preventDefault();var l=Array.from(t.querySelectorAll(".select-item")).filter(e=>"none"!==e.style.display);if(0!==l.length){var a=t.querySelector(".select-item:focus");let e=0;a&&(a=l.indexOf(a),e="ArrowDown"===c.key?(a+1)%l.length:(a-1+l.length)%l.length),l[e].focus()}}else if("Enter"===c.key&&e?.matches(".select-item"))c.preventDefault(),r(e);else if("Escape"===c.key){a=t.querySelector("[data-tui-selectbox-search]");if(e?.matches(".select-item"))a?.focus();else if(e===a&&window.closePopover){window.closePopover(t.id);let e=document.querySelector(`[data-tui-selectbox-content-id="${t.id}"]`);setTimeout(()=>e?.focus(),50)}}}),document.addEventListener("mouseover",e=>{var t,e=e.target.closest(".select-item");e&&"true"!==e.getAttribute("data-tui-selectbox-disabled")&&(t=e.closest("[data-tui-popover-id]"))&&(t.querySelectorAll(".select-item").forEach(e=>{"true"!==e.getAttribute("data-tui-selectbox-selected")&&e.classList.remove("bg-accent","text-accent-foreground")}),"true"!==e.getAttribute("data-tui-selectbox-selected"))&&e.classList.add("bg-accent","text-accent-foreground")}),document.addEventListener("reset",e=>{e.target.matches("form")&&e.target.querySelectorAll(".select-container").forEach(e=>{var e=e.querySelector("button.select-trigger"),t=e?.getAttribute("data-tui-selectbox-content-id"),t=document.getElementById(t);t&&(t.querySelectorAll(".select-item").forEach(e=>{e.setAttribute("data-tui-selectbox-selected","false"),e.classList.remove("bg-accent","text-accent-foreground");e=e.querySelector(".select-check");e&&e.classList.replace("opacity-100","opacity-0")}),t=t.querySelector("[data-tui-selectbox-search]"))&&(t.value="",c(t)),e&&o(e)})}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0})})();